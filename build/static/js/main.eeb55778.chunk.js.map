{"version":3,"sources":["components/Editor.js","Socket.js","hooks/useLocalStorage.js","components/Context.js","components/VideoPlayer.jsx","components/Sidebar.jsx","components/Notifications.jsx","components/Call.js","components/App.js","index.js"],"names":["Editor","props","language","displayName","value","onChange","socket","setHtml","setCss","setJs","useState","open","setOpen","useEffect","on","data","html","css","js","emit","console","log","window","location","reload","className","type","onClick","prevOpen","icon","faCompressAlt","faExpandAlt","onBeforeChange","editor","options","lineWrapping","lint","mode","theme","lineNumbers","io","useLocalStorage","key","initialValue","prefixedKey","jsonValue","localStorage","getItem","JSON","parse","setValue","setItem","stringify","SocketContext","createContext","ContextProvider","children","callAccepted","setCallAccepted","callEnded","setCallEnded","stream","setStream","name","setName","call","setCall","me","setMe","myVideo","useRef","userVideo","connectionRef","navigator","mediaDevices","getUserMedia","video","audio","then","currentStream","current","srcObject","catch","error","id","from","callerName","signal","isReceivingCall","Provider","callUser","peer","Peer","initiator","trickle","userToCall","signalData","leaveCall","destroy","answerCall","to","useStyles","makeStyles","width","breakpoints","down","gridContainer","justifyContent","flexDirection","paper","padding","border","margin","VideoPlayer","useContext","classes","Grid","container","Paper","item","xs","md","Typography","variant","gutterBottom","playsInline","muted","ref","autoPlay","root","display","color","marginTop","Sidebar","idToCall","setIdToCall","Container","style","alignItems","elevation","noValidate","autoComplete","TextField","label","required","e","target","fullWidth","text","onCopy","alert","Button","startIcon","Assignment","fontSize","PhoneDisabled","Phone","Notifications","appBar","borderRadius","image","marginLeft","wrapper","Call","App","srcDoc","setSrcDoc","connected","timeout","setTimeout","clearTimeout","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","title","sandbox","frameBorder","height","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.eeb55778.chunk.js","sourcesContent":["import React, { useState, useEffect} from 'react'\nimport 'codemirror/lib/codemirror.css'\nimport 'codemirror/theme/material.css'\nimport 'codemirror/mode/xml/xml'\nimport 'codemirror/mode/javascript/javascript'\nimport 'codemirror/mode/css/css'\nimport { Controlled as ControlledEditor } from 'react-codemirror2'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCompressAlt, faExpandAlt } from '@fortawesome/free-solid-svg-icons'\n\nexport default function Editor(props) {\n  const {\n    language,\n    displayName,\n    value,\n    onChange,\n    socket, \n    setHtml,\n    setCss,\n    setJs,\n  } = props;\n\n  const [open, setOpen] = useState(true);\n  useEffect(() => {\n    socket.on('code-update', (data) => {\n      setHtml(data.html);\n      setCss(data.css);\n      setJs(data.js);\n      socket.emit('code-update', { ...data});\n      console.log('updaten');\n    });\n    // const { html, css, js } = props; \n\n  }, []);\n\n  // Handle code changes when a user interacts with the editor\n  function handleChange(editor, data, value) {\n    onChange(value);\n   \n    const { html, css, js } = props; \n    // Emit code changes to be shared with other connected clients\n    socket.emit('code-update', { html, css, js });\n  }\n  useEffect(() => {\n    socket.on('refresh-page', () => {\n      // Refresh the page when a refresh event is received\n      window.location.reload();\n    });\n  }, []);\n\n  return (\n    <div className={`editor-container ${open ? '' : 'collapsed'}`}>\n      <div className=\"editor-title\">\n        {displayName}\n        <button\n          type=\"button\"\n          className=\"expand-collapse-btn\"\n          onClick={() => setOpen(prevOpen => !prevOpen)}\n        >\n          <FontAwesomeIcon icon={open ? faCompressAlt : faExpandAlt} />\n        </button>\n      </div>\n      <ControlledEditor\n        onBeforeChange={handleChange}\n        value={value}\n        className=\"code-mirror-wrapper\"\n        socket={socket}\n        options={{\n          lineWrapping: true,\n          lint: true,\n          mode: language,\n          theme: 'material',\n          lineNumbers: true\n        }}\n      />\n    </div>\n  )\n}\n","import { io } from 'socket.io-client';\n\n// const URL = process.env.NODE_ENV === 'production' ? undefined : 'http://localhost:3001';\n\nexport const socket = io(); // Export the 'socket' variable\n\n","import { useEffect, useState } from 'react'\n\nconst PREFIX = 'codepen-clone-'\n\nexport default function useLocalStorage(key, initialValue) {\n  const prefixedKey = PREFIX + key\n\n  const [value, setValue] = useState(() => {\n    const jsonValue = localStorage.getItem(prefixedKey)\n    if (jsonValue != null) return JSON.parse(jsonValue)\n\n    if (typeof initialValue === 'function') {\n      return initialValue()\n    } else {\n      return initialValue\n    }\n  })\n\n  useEffect(() => {\n    localStorage.setItem(prefixedKey, JSON.stringify(value))\n  }, [prefixedKey, value])\n\n  return [value, setValue]\n}\n","import React, { createContext, useState, useRef, useEffect } from 'react';\nimport { io } from 'socket.io-client';\nimport Peer from 'simple-peer';\n\nconst SocketContext = createContext();\n\nconst socket = io('http://localhost:8080');\n\n\nconst ContextProvider = ({ children }) => {\n  const [callAccepted, setCallAccepted] = useState(false);\n  const [callEnded, setCallEnded] = useState(false);\n  const [stream, setStream] = useState();\n  const [name, setName] = useState('');\n  const [call, setCall] = useState({});\n  const [me, setMe] = useState('');\n\n  const myVideo = useRef();\n  const userVideo = useRef();\n  const connectionRef = useRef();\n\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true })\n    .then((currentStream) => {\n      setStream(currentStream);\n      myVideo.current.srcObject = currentStream;\n    })\n    .catch((error) => {\n      console.error(\"Error accessing media stream:\", error);\n    });\n  \n\n    socket.on('me', (id) => setMe(id));\n\n    socket.on('callUser', ({ from, name: callerName, signal }) => {\n      setCall({ isReceivingCall: true, from, name: callerName, signal });\n    });\n  }, []);\n\n  const answerCall = () => {\n    setCallAccepted(true);\n\n    const peer = new Peer({ initiator: false, trickle: false, stream });\n\n    peer.on('signal', (data) => {\n      socket.emit('answerCall', { signal: data, to: call.from });\n    });\n\n    peer.on('stream', (currentStream) => {\n      userVideo.current.srcObject = currentStream;\n    });\n\n    peer.signal(call.signal);\n\n    connectionRef.current = peer;\n  };\n\n  const callUser = (id) => {\n    const peer = new Peer({ initiator: true, trickle: false, stream });\n\n    peer.on('signal', (data) => {\n      socket.emit('callUser', { userToCall: id, signalData: data, from: me, name });\n    });\n\n    peer.on('stream', (currentStream) => {\n      userVideo.current.srcObject = currentStream;\n    });\n\n    socket.on('callAccepted', (signal) => {\n      setCallAccepted(true);\n\n      peer.signal(signal);\n    });\n\n    connectionRef.current = peer;\n  };\n\n  const leaveCall = () => {\n    setCallEnded(true);\n\n    connectionRef.current.destroy();\n\n    window.location.reload();\n  };\n\n  return (\n    <SocketContext.Provider value={{\n      call,\n      callAccepted,\n      myVideo,\n      userVideo,\n      stream,\n      name,\n      setName,\n      callEnded,\n      me,\n      callUser,\n      leaveCall,\n      answerCall,\n    }}\n    >\n      {children}\n    </SocketContext.Provider>\n  );\n};\n\nexport { ContextProvider, SocketContext };\n","import React, { useContext } from 'react';\nimport { Grid, Typography, Paper, makeStyles } from '@material-ui/core';\n\nimport { SocketContext } from './Context';\n\nconst useStyles = makeStyles((theme) => ({\n  video: {\n    width: '550px',\n    [theme.breakpoints.down('xs')]: {\n      width: '300px',\n    },\n  },\n  gridContainer: {\n    justifyContent: 'center',\n    [theme.breakpoints.down('xs')]: {\n      flexDirection: 'column',\n    },\n  },\n  paper: {\n    padding: '10px',\n    border: '2px solid black',\n    margin: '10px',\n  },\n}));\n\nconst VideoPlayer = () => {\n  const { name, callAccepted, myVideo, userVideo, callEnded, stream, call } = useContext(SocketContext);\n  const classes = useStyles();\n\n  return (\n    <Grid container className={classes.gridContainer}>\n      {stream && (\n        <Paper className={classes.paper}>\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"h5\" gutterBottom>{name || 'Name'}</Typography>\n            <video playsInline muted ref={myVideo} autoPlay className={classes.video} />\n          </Grid>\n        </Paper>\n      )}\n      {callAccepted && !callEnded && (\n        <Paper className={classes.paper}>\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"h5\" gutterBottom>{call.name || 'Name'}</Typography>\n            <video playsInline ref={userVideo} autoPlay className={classes.video} />\n          </Grid>\n        </Paper>\n      )}\n    </Grid>\n  );\n};\n\nexport default VideoPlayer;\n","import React, { useState, useContext } from 'react';\nimport { Button, TextField, Grid, Typography, Container, Paper } from '@material-ui/core';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n\nimport { Assignment, Phone, PhoneDisabled } from '@material-ui/icons';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { SocketContext } from './Context';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    color: 'black'\n  },\n  gridContainer: {\n    width: '100%',\n    [theme.breakpoints.down('xs')]: {\n      flexDirection: 'column',\n    },\n  },\n  container: {\n    width: '600px',\n    display: \"flex\", \n    margin: '35px 0',\n    padding: 0,\n    [theme.breakpoints.down('xs')]: {\n      width: '80%',\n    },\n    \n  },\n  margin: {\n    marginTop: 20,\n  },\n  padding: {\n    padding: 20,\n  },\n  paper: {\n    padding: '10px 20px',\n    border: '2px solid black',\n  },\n}));\n\nconst Sidebar = ({ children }) => {\n  const { me, callAccepted, name, setName, callEnded, leaveCall, callUser } = useContext(SocketContext);\n  const [idToCall, setIdToCall] = useState('');\n  const classes = useStyles();\n\n  return (\n  <>\n  <Container style={{alignItems: \"center\", display: \"flex\", justifyContent: \"center\", margin:\"0\"}}>\n      <Paper elevation={10} className={classes.paper}>\n        <form className={classes.root} noValidate autoComplete=\"off\">\n          <Grid container className={classes.gridContainer}>\n            <Grid item xs={12} md={6} className={classes.padding}>\n              <Typography gutterBottom variant=\"h6\">Account Info</Typography>\n              <TextField label=\"Name\" required value={name} onChange={(e) => setName(e.target.value)} fullWidth />\n              <CopyToClipboard text={me} onCopy={() => alert('Copied to clipboard!')}>\n              <Button style={{marginTop: \"20px\"}}variant=\"contained\" color=\"primary\" fullWidth startIcon={<Assignment fontSize=\"large\" />}>\n                Copy Your ID\n              </Button>\n            </CopyToClipboard>\n\n            </Grid>\n            <Grid item xs={12} md={6} className={classes.padding}>\n              <Typography gutterBottom variant=\"h6\">Make a call</Typography>\n              <TextField label=\"ID to call\" value={idToCall} onChange={(e) => setIdToCall(e.target.value)} fullWidth />\n              {callAccepted && !callEnded ? (\n                <Button variant=\"contained\" color=\"secondary\" startIcon={<PhoneDisabled fontSize=\"large\" />} fullWidth onClick={leaveCall} className={classes.margin}>\n                  Hang Up\n                </Button>\n              ) : (\n                <Button variant=\"contained\" color=\"primary\" startIcon={<Phone fontSize=\"large\" />} fullWidth onClick={() =>{  callUser(idToCall) ; alert('ringing...')} }className={classes.margin} >\n                  Call\n                </Button>\n              )}\n            </Grid>\n          </Grid>\n        </form>\n        {children}\n      </Paper>\n      </Container>\n    </>\n  );\n};\n\nexport default Sidebar;\n","import React, { useContext } from 'react';\nimport { Button } from '@material-ui/core';\n\nimport { SocketContext } from './Context';\n\nconst Notifications = () => {\n  const { answerCall, call, callAccepted } = useContext(SocketContext);\n\n  return (\n    <>\n      {call.isReceivingCall && !callAccepted && (\n        <div style={{ display: 'flex', justifyContent: 'space-around' }}>\n          <h1>{call.name} is calling:</h1>\n          <Button variant=\"contained\" color=\"primary\" onClick={answerCall}>\n            Answer\n          </Button>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Notifications;\n","import React, {useEffect, useState} from \"react\";\nimport { Typography, AppBar } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport VideoPlayer from \"./VideoPlayer\";\nimport Sidebar from \"./Sidebar\";\nimport Notifications from \"./Notifications\";\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    borderRadius: 15,\n    margin: \"30px 100px\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: \"600px\",\n    border: \"2px solid black\",\n\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"90%\",\n    },\n  },\n  image: {\n    marginLeft: \"15px\",\n  },\n  wrapper: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    width: \"100%\",\n  },\n}));\n\nconst Call = () => {\n  const classes = useStyles();\n  const [open, setOpen]= useState()\n  useEffect(() => {\n    if (open) {\n      // When the component is opened, get the media stream\n      navigator.mediaDevices\n        .getUserMedia({ video: true, audio: true })\n        .then((currentStream) => {\n          setOpen(currentStream);\n        })\n        .catch((error) => {\n          console.error(\"Error accessing media stream:\", error);\n        });\n    } \n  }, [open]);\n  return (\n    <div className={classes.wrapper}>\n\n      <VideoPlayer />\n      <Sidebar>\n        <Notifications />\n      </Sidebar>\n    </div>\n  );\n};\n\nexport default Call;\n","import React, { useState, useEffect } from \"react\";\nimport Editor from \"./Editor\";\nimport { socket } from \"../Socket\";\nimport useLocalStorage from \"../hooks/useLocalStorage\";\nimport { io } from \"socket.io-client\"; // Import the socket.io-client library\n\nimport Call from \"./Call\";\n\nfunction App() {\n  const [open, setOpen] = useState(true);\n  const [html, setHtml] = useLocalStorage(\"html\", \"\");\n  const [css, setCss] = useLocalStorage(\"css\", \"\");\n  const [js, setJs] = useLocalStorage(\"js\", \"\");\n  const [srcDoc, setSrcDoc] = useState(\"\");\n  const [isConnected, setIsConnected] = useState(socket.connected);\n\n  const [showCall, setShowCall] = useState(false);\n  useEffect(() => {\n    socket.emit(\"code-update\", { html, css, js });\n    const timeout = setTimeout(() => {\n      setSrcDoc(`\n        <html>\n          <body>${html}</body>\n          <style>${css}</style>\n          <script>${js}</script>\n        </html>\n      `);\n    }, 150);\n\n    return () => clearTimeout(timeout);\n  }, [html, css, js]);\n\n  useEffect(() => {\n    socket.on(\"refresh-page\", () => {\n      // Refresh the page when a refresh event is received\n      window.location.reload();\n    });\n  }, []);\n\n\n\n  return (\n    <>\n      <div className=\"cont\">\n        <div className=\"flex-cont\">\n          <button\n            className=\"call-btn\"\n            onClick={() => setOpen((prevOpen) => !prevOpen)}\n          >\n            <div className=\"nav\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth={1.5}\n                stroke=\"currentColor\"\n                className=\"w-6 h-6\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z\"\n                />\n              </svg>\n            </div>\n          </button>\n          {open && <Call />}\n\n          <div className=\"pane top-pane\">\n            <Editor\n              language=\"xml\"\n              displayName=\"HTML\"\n              value={html}\n              onChange={setHtml}\n              socket={socket}\n            />\n            <Editor\n              language=\"css\"\n              displayName=\"CSS\"\n              value={css}\n              onChange={setCss}\n              socket={socket}\n            />\n            <Editor\n              language=\"javascript\"\n              displayName=\"JS\"\n              value={js}\n              onChange={setJs}\n              socket={socket}\n            />\n          </div>\n          <div className=\"pane\">\n            <iframe\n              socket={socket}\n              srcDoc={srcDoc}\n              title=\"output\"\n              sandbox=\"allow-scripts\"\n              frameBorder=\"0\"\n              width=\"100%\"\n              height=\"100%\"\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport { ContextProvider } from '../src/components/Context'\n\n\nReactDOM.render(\n  <React.StrictMode>\n  <ContextProvider>\n    <App />\n  </ContextProvider>,\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}