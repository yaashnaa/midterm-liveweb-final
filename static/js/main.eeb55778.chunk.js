(this["webpackJsonpcodepen-clone"]=this["webpackJsonpcodepen-clone"]||[]).push([[0],{131:function(e,t){},133:function(e,t){},146:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(8),l=a.n(r),o=(a(97),a(10)),i=a(77),s=(a(98),a(99),a(100),a(101),a(102),a(78)),m=a(79),u=a(61);function d(e){var t=e.language,a=e.displayName,r=e.value,l=e.onChange,d=e.socket,p=e.setHtml,f=e.setCss,b=e.setJs,g=Object(n.useState)(!0),E=Object(o.a)(g,2),j=E[0],v=E[1];return Object(n.useEffect)((function(){d.on("code-update",(function(e){p(e.html),f(e.css),b(e.js),d.emit("code-update",Object(i.a)({},e)),console.log("updaten")}))}),[]),Object(n.useEffect)((function(){d.on("refresh-page",(function(){window.location.reload()}))}),[]),c.a.createElement("div",{className:"editor-container ".concat(j?"":"collapsed")},c.a.createElement("div",{className:"editor-title"},a,c.a.createElement("button",{type:"button",className:"expand-collapse-btn",onClick:function(){return v((function(e){return!e}))}},c.a.createElement(m.a,{icon:j?u.a:u.b}))),c.a.createElement(s.Controlled,{onBeforeChange:function(t,a,n){l(n);var c=e.html,r=e.css,o=e.js;d.emit("code-update",{html:c,css:r,js:o})},value:r,className:"code-mirror-wrapper",socket:d,options:{lineWrapping:!0,lint:!0,mode:t,theme:"material",lineNumbers:!0}}))}var p=a(45),f=Object(p.a)();function b(e,t){var a="codepen-clone-"+e,c=Object(n.useState)((function(){var e=localStorage.getItem(a);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),r=Object(o.a)(c,2),l=r[0],i=r[1];return Object(n.useEffect)((function(){localStorage.setItem(a,JSON.stringify(l))}),[a,l]),[l,i]}var g=a(26),E=a(176),j=a(179),v=a(181),O=a(182),h=a(62),x=a.n(h),C=Object(n.createContext)(),w=Object(p.a)("http://localhost:8080"),y=function(e){var t=e.children,a=Object(n.useState)(!1),r=Object(o.a)(a,2),l=r[0],i=r[1],s=Object(n.useState)(!1),m=Object(o.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(),f=Object(o.a)(p,2),b=f[0],g=f[1],E=Object(n.useState)(""),j=Object(o.a)(E,2),v=j[0],O=j[1],h=Object(n.useState)({}),y=Object(o.a)(h,2),N=y[0],k=y[1],S=Object(n.useState)(""),I=Object(o.a)(S,2),D=I[0],B=I[1],A=Object(n.useRef)(),T=Object(n.useRef)(),U=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){g(e),A.current.srcObject=e})).catch((function(e){console.error("Error accessing media stream:",e)})),w.on("me",(function(e){return B(e)})),w.on("callUser",(function(e){var t=e.from,a=e.name,n=e.signal;k({isReceivingCall:!0,from:t,name:a,signal:n})}))}),[]);return c.a.createElement(C.Provider,{value:{call:N,callAccepted:l,myVideo:A,userVideo:T,stream:b,name:v,setName:O,callEnded:u,me:D,callUser:function(e){var t=new x.a({initiator:!0,trickle:!1,stream:b});t.on("signal",(function(t){w.emit("callUser",{userToCall:e,signalData:t,from:D,name:v})})),t.on("stream",(function(e){T.current.srcObject=e})),w.on("callAccepted",(function(e){i(!0),t.signal(e)})),U.current=t},leaveCall:function(){d(!0),U.current.destroy(),window.location.reload()},answerCall:function(){i(!0);var e=new x.a({initiator:!1,trickle:!1,stream:b});e.on("signal",(function(e){w.emit("answerCall",{signal:e,to:N.from})})),e.on("stream",(function(e){T.current.srcObject=e})),e.signal(N.signal),U.current=e}}},t)},N=Object(E.a)((function(e){return{video:Object(g.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(g.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"}}})),k=function(){var e=Object(n.useContext)(C),t=e.name,a=e.callAccepted,r=e.myVideo,l=e.userVideo,o=e.callEnded,i=e.stream,s=e.call,m=N();return c.a.createElement(j.a,{container:!0,className:m.gridContainer},i&&c.a.createElement(v.a,{className:m.paper},c.a.createElement(j.a,{item:!0,xs:12,md:6},c.a.createElement(O.a,{variant:"h5",gutterBottom:!0},t||"Name"),c.a.createElement("video",{playsInline:!0,muted:!0,ref:r,autoPlay:!0,className:m.video}))),a&&!o&&c.a.createElement(v.a,{className:m.paper},c.a.createElement(j.a,{item:!0,xs:12,md:6},c.a.createElement(O.a,{variant:"h5",gutterBottom:!0},s.name||"Name"),c.a.createElement("video",{playsInline:!0,ref:l,autoPlay:!0,className:m.video}))))},S=a(183),I=a(187),D=a(188),B=a(85),A=a(184),T=a(185),U=a(186),W=Object(E.a)((function(e){return{root:{display:"flex",flexDirection:"column",color:"black"},gridContainer:Object(g.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(g.a)({width:"600px",display:"flex",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),J=function(e){var t=e.children,a=Object(n.useContext)(C),r=a.me,l=a.callAccepted,i=a.name,s=a.setName,m=a.callEnded,u=a.leaveCall,d=a.callUser,p=Object(n.useState)(""),f=Object(o.a)(p,2),b=f[0],g=f[1],E=W();return c.a.createElement(c.a.Fragment,null,c.a.createElement(S.a,{style:{alignItems:"center",display:"flex",justifyContent:"center",margin:"0"}},c.a.createElement(v.a,{elevation:10,className:E.paper},c.a.createElement("form",{className:E.root,noValidate:!0,autoComplete:"off"},c.a.createElement(j.a,{container:!0,className:E.gridContainer},c.a.createElement(j.a,{item:!0,xs:12,md:6,className:E.padding},c.a.createElement(O.a,{gutterBottom:!0,variant:"h6"},"Account Info"),c.a.createElement(I.a,{label:"Name",required:!0,value:i,onChange:function(e){return s(e.target.value)},fullWidth:!0}),c.a.createElement(B.CopyToClipboard,{text:r,onCopy:function(){return alert("Copied to clipboard!")}},c.a.createElement(D.a,{style:{marginTop:"20px"},variant:"contained",color:"primary",fullWidth:!0,startIcon:c.a.createElement(A.a,{fontSize:"large"})},"Copy Your ID"))),c.a.createElement(j.a,{item:!0,xs:12,md:6,className:E.padding},c.a.createElement(O.a,{gutterBottom:!0,variant:"h6"},"Make a call"),c.a.createElement(I.a,{label:"ID to call",value:b,onChange:function(e){return g(e.target.value)},fullWidth:!0}),l&&!m?c.a.createElement(D.a,{variant:"contained",color:"secondary",startIcon:c.a.createElement(T.a,{fontSize:"large"}),fullWidth:!0,onClick:u,className:E.margin},"Hang Up"):c.a.createElement(D.a,{variant:"contained",color:"primary",startIcon:c.a.createElement(U.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){d(b),alert("ringing...")},className:E.margin},"Call")))),t)))},M=function(){var e=Object(n.useContext)(C),t=e.answerCall,a=e.call,r=e.callAccepted;return c.a.createElement(c.a.Fragment,null,a.isReceivingCall&&!r&&c.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},c.a.createElement("h1",null,a.name," is calling:"),c.a.createElement(D.a,{variant:"contained",color:"primary",onClick:t},"Answer")))},R=Object(E.a)((function(e){return{appBar:Object(g.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),L=function(){var e=R(),t=Object(n.useState)(),a=Object(o.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){r&&navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){l(e)})).catch((function(e){console.error("Error accessing media stream:",e)}))}),[r]),c.a.createElement("div",{className:e.wrapper},c.a.createElement(k,null),c.a.createElement(J,null,c.a.createElement(M,null)))};var V=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],l=b("html",""),i=Object(o.a)(l,2),s=i[0],m=i[1],u=b("css",""),p=Object(o.a)(u,2),g=p[0],E=p[1],j=b("js",""),v=Object(o.a)(j,2),O=v[0],h=v[1],x=Object(n.useState)(""),C=Object(o.a)(x,2),w=C[0],y=C[1],N=Object(n.useState)(f.connected),k=Object(o.a)(N,2),S=(k[0],k[1],Object(n.useState)(!1)),I=Object(o.a)(S,2);return I[0],I[1],Object(n.useEffect)((function(){f.emit("code-update",{html:s,css:g,js:O});var e=setTimeout((function(){y("\n        <html>\n          <body>".concat(s,"</body>\n          <style>").concat(g,"</style>\n          <script>").concat(O,"<\/script>\n        </html>\n      "))}),150);return function(){return clearTimeout(e)}}),[s,g,O]),Object(n.useEffect)((function(){f.on("refresh-page",(function(){window.location.reload()}))}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"cont"},c.a.createElement("div",{className:"flex-cont"},c.a.createElement("button",{className:"call-btn",onClick:function(){return r((function(e){return!e}))}},c.a.createElement("div",{className:"nav"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6"},c.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"})))),a&&c.a.createElement(L,null),c.a.createElement("div",{className:"pane top-pane"},c.a.createElement(d,{language:"xml",displayName:"HTML",value:s,onChange:m,socket:f}),c.a.createElement(d,{language:"css",displayName:"CSS",value:g,onChange:E,socket:f}),c.a.createElement(d,{language:"javascript",displayName:"JS",value:O,onChange:h,socket:f})),c.a.createElement("div",{className:"pane"},c.a.createElement("iframe",{socket:f,srcDoc:w,title:"output",sandbox:"allow-scripts",frameBorder:"0",width:"100%",height:"100%"})))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null,c.a.createElement(V,null)),","),document.getElementById("root"))},92:function(e,t,a){e.exports=a(146)},97:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.eeb55778.chunk.js.map